---
description: Azure MCP CLI Command Reference
alwaysApply: false
---
# Azure MCP CLI Command Reference

This document provides a comprehensive reference for using the Azure MCP CLI commands, which enable you to manage various Azure services and resources through the MCP tooling.

**Note:** Most commands require a subscription ID. For some services, additional parameters like resource group, account name, or server details are required.

---

## Global Parameters

The following parameters are available for all commands:

*   **subscription**: `Required. Azure subscription ID for target resources.`
*   **tenant-id**: `Optional. Azure tenant ID for authentication.`
*   **auth-method**: `Optional. Authentication method ('credential', 'key', 'connectionString'). Default: 'credential'.`
*   **retry-max-retries**: `Optional. Maximum retry attempts for failed operations. Default: 3.`
*   **retry-delay**: `Optional. Delay between retry attempts in seconds. Default: 2.`
*   **retry-max-delay**: `Optional. Maximum delay between retries in seconds. Default: 10.`
*   **retry-mode**: `Optional. Retry strategy ('fixed' or 'exponential'). Default: 'exponential'.`
*   **retry-network-timeout**: `Optional. Network operation timeout in seconds. Default: 100.`

---

## Command Categories & Available Commands

### 1. Server Operations

*   **Server Start:** `Start the MCP Server.`
    *   Example: `azmcp server start --transport <transport>`

### 2. Subscription Management

*   **Subscription List:** `List available Azure subscriptions.`
    *   Example: `azmcp subscription list --tenant-id <tenant-id>`

### 3. Best Practices

*   **Get Best Practices:** `Get secure, production-grade Azure SDK best practices for effective code generation.`
    *   Example: `azmcp bestpractices get`

### 4. Azure Cosmos DB Operations

*   **List Accounts:** `List Cosmos DB accounts in a subscription.`
    *   Example: `azmcp cosmos account list --subscription <subscription>`
*   **List Databases:** `List databases in a Cosmos DB account.`
    *   Example: `azmcp cosmos database list --subscription <subscription> --account-name <account-name>`
*   **List Containers:** `List containers in a Cosmos DB database.`
    *   Example: `azmcp cosmos database container list --subscription <subscription> --account-name <account-name> --database-name <database-name>`
*   **Query Items:** `Query items in a Cosmos DB container.`
    *   Example: 
      ```
      azmcp cosmos database container item query --subscription <subscription> \
                       --account-name <account-name> \
                       --database-name <database-name> \
                       --container-name <container-name> \
                       [--query "SELECT * FROM c"]
      ```

### 5. Kusto (Azure Data Explorer) Operations

*   **List Clusters:** `List Kusto clusters in a subscription.`
    *   Example: `azmcp kusto cluster list --subscription <subscription>`
*   **Get Cluster Details:** `Get details for a Kusto cluster.`
    *   Example: `azmcp kusto cluster get --subscription <subscription> --cluster-name <cluster-name>`
*   **List Databases:** `List databases in a Kusto cluster.`
    *   Example: `azmcp kusto database list [--cluster-uri <cluster-uri> | --subscription <subscription> --cluster-name <cluster-name>]`
*   **List Tables:** `List tables in a Kusto database.`
    *   Example: 
      ```
      azmcp kusto table list [--cluster-uri <cluster-uri> | --subscription <subscription> --cluster-name <cluster-name>] \
                                --database-name <database-name>
      ```
*   **Get Table Schema:** `Retrieve the schema of a specified Kusto table.`
    *   Example: 
      ```
      azmcp kusto table schema [--cluster-uri <cluster-uri> | --subscription <subscription> --cluster-name <cluster-name>] \
                                  --database-name <database-name> \
                                  --table <table-name>
      ```
*   **Query Database:** `Query a Kusto database using KQL.`
    *   Example: 
      ```
      azmcp kusto query [--cluster-uri <cluster-uri> | --subscription <subscription> --cluster-name <cluster-name>] \
                           --database-name <database-name> \
                           --query "<kql-query>"
      ```
*   **Get Sample Data:** `Retrieve a sample of data from a specified Kusto table.`
    *   Example: 
      ```
      azmcp kusto sample [--cluster-uri <cluster-uri> | --subscription <subscription> --cluster-name <cluster-name>] \
                            --database-name <database-name> \
                            --table <table-name> \
                           [--limit <limit>]
      ```

### 6. Azure DB for PostgreSQL Operations

*   **List Databases:** `List all databases in a PostgreSQL server.`
    *   Example: `azmcp postgres database list --subscription <subscription> --resource-group <resource-group> --user-name <user> --server <server>`
*   **Execute Query:** `Execute a query on a PostgreSQL database.`
    *   Example: `azmcp postgres database query --subscription <subscription> --resource-group <resource-group> --user-name <user> --server <server> --database <database> --query <query>`
*   **List Tables:** `List all tables in a PostgreSQL database.`
    *   Example: `azmcp postgres table list --subscription <subscription> --resource-group <resource-group> --user-name <user> --server <server> --database <database>`
*   **Get Table Schema:** `Get the schema of a specific table in a PostgreSQL database.`
    *   Example: `azmcp postgres table schema --subscription <subscription> --resource-group <resource-group> --user-name <user> --server <server> --database <database> --table <table>`
*   **List Servers:** `List all PostgreSQL servers in a subscription & resource group.`
    *   Example: `azmcp postgres server list --subscription <subscription> --resource-group <resource-group> --user-name <user>`
*   **Get Server Config:** `Retrieve the configuration of a PostgreSQL server.`
    *   Example: `azmcp postgres server config --subscription <subscription> --resource-group <resource-group> --user-name <user> --server <server>`
*   **Get Server Parameter:** `Retrieve a specific parameter of a PostgreSQL server.`
    *   Example: `azmcp postgres server param --subscription <subscription> --resource-group <resource-group> --user-name <user> --server <server> --param <parameter>`

### 7. Azure Storage Operations

*   **List Storage Accounts:** `List Storage accounts in a subscription.`
    *   Example: `azmcp storage account list --subscription <subscription>`
*   **List Tables:** `List tables in a Storage account.`
    *   Example: `azmcp storage table list --subscription <subscription> --account-name <account-name>`
*   **List Blobs:** `List blobs in a Storage container.`
    *   Example: `azmcp storage blob list --subscription <subscription> --account-name <account-name> --container-name <container-name>`
*   **List Containers:** `List containers in a Storage blob service.`
    *   Example: `azmcp storage blob container list --subscription <subscription> --account-name <account-name>`
*   **Get Container Details:** `Get detailed properties of a storage container.`
    *   Example: `azmcp storage blob container details --subscription <subscription> --account-name <account-name> --container-name <container-name>`

### 8. Azure Monitor (Log Analytics) Operations

*   **List Workspaces:** `List Log Analytics workspaces in a subscription.`
    *   Example: `azmcp monitor workspace list --subscription <subscription>`
*   **List Tables:** `List tables in a Log Analytics workspace.`
    *   Example: `azmcp monitor table list --subscription <subscription> --workspace <workspace> --resource-group <resource-group>`
*   **Query Logs:** `Query logs from Azure Monitor using KQL.`
    *   Example: 
      ```
      azmcp monitor log query --subscription <subscription> \
                        --workspace <workspace> \
                        --table-name <table-name> \
                        --query "<kql-query>" \
                        [--hours <hours>] \
                        [--limit <limit>]
      ```
    *   Specific Example: 
      ```
      azmcp monitor log query --subscription <subscription> \
                        --workspace <workspace> \
                        --table-name "AppEvents_CL" \
                        --query "| order by TimeGenerated desc"
      ```

### 9. Azure App Configuration Operations

*   **List Config Stores:** `List App Configuration stores in a subscription.`
    *   Example: `azmcp appconfig account list --subscription <subscription>`
*   **List Key-Values:** `List all key-value settings in an App Configuration store.`
    *   Example: `azmcp appconfig kv list --subscription <subscription> --account-name <account-name> [--key <key>] [--label <label>]`
*   **Show Key-Value:** `Show a specific key-value setting.`
    *   Example: `azmcp appconfig kv show --subscription <subscription> --account-name <account-name> --key <key> [--label <label>]`
*   **Set Key-Value:** `Set a key-value setting.`
    *   Example: `azmcp appconfig kv set --subscription <subscription> --account-name <account-name> --key <key> --value <value> [--label <label>]`
*   **Lock Key-Value:** `Lock a key-value setting (make it read-only).`
    *   Example: `azmcp appconfig kv lock --subscription <subscription> --account-name <account-name> --key <key> [--label <label>]`
*   **Unlock Key-Value:** `Unlock a key-value setting (make it editable).`
    *   Example: `azmcp appconfig kv unlock --subscription <subscription> --account-name <account-name> --key <key> [--label <label>]`
*   **Delete Key-Value:** `Delete a key-value setting.`
    *   Example: `azmcp appconfig kv delete --subscription <subscription> --account-name <account-name> --key <key> [--label <label>]`

### 10. Azure Key Vault Operations

*   **List Keys:** `Lists keys in vault.`
    *   Example: `azmcp keyvault key list --subscription <subscription> --vault <vault-name> --include-managed <true/false>`
*   **Get Key:** `Gets a key in vault.`
    *   Example: `azmcp keyvault key get --subscription <subscription> --vault <vault-name> --key <key-name>`
*   **Create Key:** `Create a key in vault.`
    *   Example: `azmcp keyvault key create --subscription <subscription> --vault <vault-name> --key <key-name> --key-type <key-type>`

### 11. Azure Service Bus Operations

*   **Peek Queue Messages:** `Peeks at messages in a Service Bus queue.`
    *   Example: `azmcp servicebus queue peek --subscription <subscription> --namespace <service-bus-namespace> --queue-name <queue-name> [--max-messages <int>]`
*   **Get Queue Details:** `Returns runtime and details about the Service Bus queue.`
    *   Example: `azmcp servicebus queue details --subscription <subscription> --namespace <service-bus-namespace> --queue-name <queue-name>`
*   **Get Topic Details:** `Gets runtime details a Service Bus topic.`
    *   Example: `azmcp servicebus topic details --subscription <subscription> --namespace <service-bus-namespace> --topic-name <topic-name>`
*   **Peek Subscription Messages:** `Peeks at messages in a Service Bus subscription within a topic.`
    *   Example: `azmcp servicebus topic subscription peek --subscription <subscription> --namespace <service-bus-namespace> --topic-name <topic-name> --subscription-name <subscription-name> [--max-messages <int>]`
*   **Get Subscription Details:** `Gets runtime details and message counts for a Service Bus subscription.`
    *   Example: `azmcp servicebus topic subscription details --subscription <subscription> --namespace <service-bus-namespace> --topic-name <topic-name> --subscription-name <subscription-name>`

### 12. Azure Resource Group Operations

*   **List Resource Groups:** `List resource groups in a subscription.`
    *   Example: `azmcp group list --subscription <subscription>`

### 13. Azure CLI Extension Operations

*   **Execute Azure CLI Command:** `Execute any Azure CLI command.`
    *   Example: `azmcp extension az --command "<command>"`
    *   List Resource Groups Example: `azmcp extension az --command "group list"`
    *   Get Storage Account Details Example: `azmcp extension az --command "storage account show --name <account-name> --resource-group <resource-group>"`
    *   List Virtual Machines Example: `azmcp extension az --command "vm list --resource-group <resource-group>"`

---

## Response Format

All responses follow a consistent JSON format:

```json
{
  "status": "200|403|500, etc",
  "message": "",
  "args": [],
  "results": [],
  "duration": 123
}
```

---

## Error Handling

The CLI returns structured JSON responses for errors, including:

*   Missing required args
*   Invalid arg values
*   Service availability issues
*   Authentication errors

---

For detailed information on any specific command, refer to the Azure documentation or use the `--help` flag with the command.